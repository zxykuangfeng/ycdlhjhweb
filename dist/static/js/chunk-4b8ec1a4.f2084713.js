(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4b8ec1a4"],{"184f":function(t,a,e){"use strict";e("964a")},"46a5":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"app-container"},[e("div",{staticClass:"header-container"},[e("div",[e("span",{staticClass:"label-title"},[t._v("隐患编号：")]),t._v(" "),e("span",{staticClass:"value-id"},[t._v(t._s(t.detailData.id||"暂无"))])]),t._v(" "),e("el-tag",{staticClass:"status-tag",attrs:{type:"success"}},[t._v(t._s(t.detailData.status))])],1),t._v(" "),e("el-card",{staticClass:"info-card"},[e("el-row",{staticClass:"info-row",attrs:{gutter:20}},[e("el-col",{staticClass:"info-item",attrs:{span:8}},[e("strong",[t._v("隐患场景：")]),t._v(" "+t._s(t.detailData.scene))]),t._v(" "),e("el-col",{staticClass:"info-item",attrs:{span:8}},[e("strong",[t._v("隐患类别：")]),t._v(" "+t._s(t.detailData.type))]),t._v(" "),e("el-col",{staticClass:"info-item",attrs:{span:8}},[e("strong",[t._v("检查项：")]),t._v(" "+t._s(t.detailData.checkItem))]),t._v(" "),e("el-col",{staticClass:"info-item",attrs:{span:8}},[e("strong",[t._v("安全评分：")]),t._v(" "),e("span",{staticClass:"safety-score"},[t._v(t._s(t.detailData.safetyScore))])]),t._v(" "),e("el-col",{staticClass:"info-item",attrs:{span:8}},[e("strong",[t._v("道路名称：")]),t._v(" "+t._s(t.detailData.roadName))]),t._v(" "),e("el-col",{staticClass:"info-item",attrs:{span:8}},[e("strong",[t._v("道路等级：")]),t._v(" "+t._s(t.detailData.roadLevel))]),t._v(" "),e("el-col",{staticClass:"info-item",attrs:{span:8}},[e("strong",[t._v("上报时间：")]),t._v(" "+t._s(t.detailData.reportTime))]),t._v(" "),e("el-col",{staticClass:"info-item",attrs:{span:8}},[e("strong",[t._v("上报方式：")]),t._v(" "+t._s(t.detailData.reportMethod))])],1),t._v(" "),e("div",{staticClass:"description"},[e("strong",[t._v("隐患描述：")]),t._v(" "+t._s(t.detailData.description)+"\n    ")])],1),t._v(" "),e("el-card",{staticClass:"map-card"},[e("h4",{staticClass:"section-title"},[t._v("隐患位置")]),t._v(" "),e("div",{staticClass:"map-container",attrs:{id:"baiduMap"}})]),t._v(" "),e("el-card",{staticClass:"comparison-card"},[e("h4",{staticClass:"section-title"},[t._v("修复前后对比")]),t._v(" "),e("el-row",{attrs:{gutter:20}},[e("el-col",{staticClass:"comparison-item",attrs:{span:12}},[e("div",{staticClass:"comparison-header"},[t._v("修复前")]),t._v(" "),e("img",{staticClass:"comparison-image",attrs:{src:t.detailData.beforeImage,alt:"修复前"}})]),t._v(" "),e("el-col",{staticClass:"comparison-item",attrs:{span:12}},[e("div",{staticClass:"comparison-header"},[t._v("修复后")]),t._v(" "),e("img",{staticClass:"comparison-image",attrs:{src:t.detailData.afterImage,alt:"修复后"}})])],1)],1),t._v(" "),e("el-card",{staticClass:"strategy-card"},[e("h4",{staticClass:"section-title"},[t._v("规范和治理对策")]),t._v(" "),e("p",{staticClass:"strategy-item"},[e("strong",[t._v("检测标准：")]),t._v(" "+t._s(t.detailData.standard)+"\n    ")]),t._v(" "),e("p",{staticClass:"strategy-item"},[e("strong",[t._v("治理对策：")]),t._v(" "+t._s(t.detailData.strategy)+"\n    ")])])],1)},r=[],i=(e("28a5"),e("96cf"),e("1da1")),n=e("012d"),c={name:"LibraryDetail",data:function(){return{detailData:{id:null,scene:"",type:"",checkItem:"",safetyScore:"",roadName:"",roadLevel:"",reportTime:"",reportMethod:"",description:"",beforeImage:"",afterImage:"",standard:"",strategy:"",status:"",yhdj:null,status_name:"",location:{lng:0,lat:0}},map:null,marker:null}},mounted:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.fetchDetailData();case 2:this.initMap();case 3:case"end":return t.stop()}}),t,this)})));function a(){return t.apply(this,arguments)}return a}(),methods:{fetchDetailData:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var a,e,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=this.$route.query.id,a){t.next=4;break}return this.$notify.error({title:"错误",message:"缺少隐患 ID 参数"}),t.abrupt("return");case 4:return t.prev=4,t.next=7,Object(n["J"])(a);case 7:e=t.sent,0===e.code?(s=e.data,this.detailData={id:s.id,scene:s.yhcj_name||"未知场景",type:s.yhlb_name||"未知类别",checkItem:s.yhjcx_name||"未知检查项",safetyScore:s.score||"0",roadName:s.roadName||"未知道路",roadLevel:s.rtype_name||"未知等级",reportTime:s.create_time||"未知时间",reportMethod:s.yhly_name||"未知来源",description:s.yhdesc||"暂无描述",beforeImage:s.imgs?"http://localhost:9527/".concat(s.imgs):"",afterImage:s.repairImg?"http://localhost:9527/".concat(s.repairImg):"",standard:s.testing_standards||"暂无标准",strategy:s.countermeasures||"暂无对策",status:s.status_name,yhdj:s.yhdj,location:{lng:parseFloat(s.point.split(",")[0])||0,lat:parseFloat(s.point.split(",")[1])||0}}):this.$notify.error({title:"错误",message:e.msg||"获取数据失败"}),t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](4),console.error("获取隐患详情失败:",t.t0),this.$notify.error({title:"错误",message:"获取隐患详情失败"});case 15:case"end":return t.stop()}}),t,this,[[4,11]])})));function a(){return t.apply(this,arguments)}return a}(),initMap:function(){this.map||(this.map=new BMap.Map("baiduMap"));var t=this.detailData.location,a=t.lng,s=t.lat;if(a&&s){var r,i=new BMap.Point(a,s);switch(this.map.centerAndZoom(i,15),this.map.enableScrollWheelZoom(!0),this.detailData.yhdj){case 1:r=e("e15e");break;case 2:r=e("730c");break;case 3:r=e("a89e");break;case 4:r=e("0b67");break;default:r=e("0dd7");break}var n=new BMap.Icon(r,new BMap.Size(40,40),{anchor:new BMap.Size(20,40),imageSize:new BMap.Size(20,20)});this.marker=new BMap.Marker(i,{icon:n}),this.map.addOverlay(this.marker)}else this.$notify.error({title:"错误",message:"隐患位置信息缺失"})}}},o=c,l=(e("184f"),e("2877")),d=Object(l["a"])(o,s,r,!1,null,"32ef5308",null);a["default"]=d.exports},"964a":function(t,a,e){}}]);