(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0a00778e"],{b4a8:function(t,e,n){},dc18:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("el-card",{staticClass:"box-card"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[t._v("企业信息")]),t._v(" "),n("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:t.editCompanyInfo}},[t._v("修改")])],1),t._v(" "),n("el-form",{ref:"companyForm",attrs:{model:t.company,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"企业名称"}},[n("el-input",{attrs:{disabled:!t.isEditing},model:{value:t.company.name,callback:function(e){t.$set(t.company,"name",e)},expression:"company.name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"负责人"}},[n("el-input",{attrs:{disabled:!t.isEditing},model:{value:t.company.fzr,callback:function(e){t.$set(t.company,"fzr",e)},expression:"company.fzr"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"联系方式"}},[n("el-input",{attrs:{disabled:!t.isEditing},model:{value:t.company.tel,callback:function(e){t.$set(t.company,"tel",e)},expression:"company.tel"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"备案材料"}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.fileList,border:""}},[n("el-table-column",{attrs:{prop:"name",label:"文件名"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-link",{attrs:{href:e.row.url,target:"_blank",download:""}},[t._v(t._s(e.row.name))])]}}])}),t._v(" "),t.isEditing?n("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text"},on:{click:function(n){return t.handleFileRemove(e.row)}}},[t._v("删除")])]}}],null,!1,3301397215)}):t._e()],1),t._v(" "),n("el-upload",{ref:"upload",attrs:{action:"/admin/fileUpload","show-file-list":!1,"on-success":t.handleUploadSuccess,"on-remove":t.handleFileRemove,multiple:""}},[n("el-button",{attrs:{size:"small",type:"primary",disabled:!t.isEditing}},[t._v("上传文件")])],1)],1)],1),t._v(" "),t.isEditing?n("div",{staticClass:"form-footer"},[n("el-button",{on:{click:t.cancelEdit}},[t._v("取消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.saveCompanyInfo}},[t._v("保存")])],1):t._e()],1)],1)},i=[],s=(n("7f7f"),n("53ca")),r=(n("96cf"),n("1da1")),o=n("012d"),l={data:function(){return{company:{id:null,uid:null,name:"",fzr:"",tel:"",imgs:[]},fileList:[],isEditing:!1}},created:function(){this.fetchCompanyInfo()},methods:{fetchCompanyInfo:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(o["x"])();case 3:if(e=t.sent,0!==e.code){t.next=10;break}if(!Array.isArray(e.data)||0!==e.data.length){t.next=7;break}return t.abrupt("return");case 7:"object"!==Object(s["a"])(e.data)||Array.isArray(e.data)||(this.company=e.data),this.company.imgs=this.company.imgs||[],this.fileList=this.company.imgs.map((function(t){return{name:t,url:"/uploads/".concat(t)}}));case 10:t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](0),console.error("获取企业信息失败:",t.t0);case 15:case"end":return t.stop()}}),t,this,[[0,12]])})));function e(){return t.apply(this,arguments)}return e}(),editCompanyInfo:function(){this.isEditing=!0},cancelEdit:function(){this.isEditing=!1,this.fetchCompanyInfo()},saveCompanyInfo:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(this.company),t.next=3,Object(o["a"])(this.company);case 3:e=t.sent,0===e.code?(this.isEditing=!1,this.fetchCompanyInfo(),this.$message.success("成功")):this.$message.success("失败");case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleUploadSuccess:function(t,e){var n={name:e.name,url:t.data.url};this.fileList.push(n),this.company.imgs.push(t.data.url),console.log(33333333333),console.log(this.company)},handleFileRemove:function(t){this.fileList=this.fileList.filter((function(e){return e.name!==t.name})),this.company.imgs=this.company.imgs.filter((function(e){return e!==t.name}))}}},c=l,u=(n("e998"),n("2877")),m=Object(u["a"])(c,a,i,!1,null,null,null);e["default"]=m.exports},e998:function(t,e,n){"use strict";n("b4a8")}}]);