(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f0439fd2"],{"333d":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"pagination-container",class:{hidden:t.hidden}},[i("el-pagination",t._b({attrs:{background:t.background,"current-page":t.currentPage,"page-size":t.pageSize,layout:t.layout,"page-sizes":t.pageSizes,total:t.total},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},"el-pagination",t.$attrs,!1))],1)},r=[];i("c5f6");Math.easeInOutQuad=function(t,e,i,n){return t/=n/2,t<1?i/2*t*t+e:(t--,-i/2*(t*(t-2)-1)+e)};var a=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();function o(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}function l(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function s(t,e,i){var n=l(),r=t-n,s=20,c=0;e="undefined"===typeof e?500:e;var u=function t(){c+=s;var l=Math.easeInOutQuad(c,n,r,e);o(l),c<e?a(t):i&&"function"===typeof i&&i()};u()}var c={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(t){this.$emit("update:page",t)}},pageSize:{get:function(){return this.limit},set:function(t){this.$emit("update:limit",t)}}},methods:{handleSizeChange:function(t){this.$emit("pagination",{page:this.currentPage,limit:t}),this.autoScroll&&s(0,800)},handleCurrentChange:function(t){this.$emit("pagination",{page:t,limit:this.pageSize}),this.autoScroll&&s(0,800)}}},u=c,p=(i("e498"),i("2877")),m=Object(p["a"])(u,n,r,!1,null,"6af373ef",null);e["a"]=m.exports},7456:function(t,e,i){},"74a4":function(t,e,i){"use strict";i.r(e);var n,r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"filter-container"},[i("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"请输入施工单位名称",clearable:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleFilter(e)}},model:{value:t.listQuery.name,callback:function(e){t.$set(t.listQuery,"name",e)},expression:"listQuery.name"}}),t._v(" "),i("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v("搜索")])],1),t._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],key:t.tableKey,ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.list,border:"",fit:"","highlight-current-row":""},on:{"selection-change":t.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{label:"ID",prop:"id",align:"center",width:"80"}}),t._v(" "),i("el-table-column",{attrs:{label:"隐患类型",prop:"yhlb_name",align:"center","min-width":"150px"}}),t._v(" "),i("el-table-column",{attrs:{label:"隐患来源",prop:"yhly_name",align:"center","min-width":"150px"}}),t._v(" "),i("el-table-column",{attrs:{label:"隐患坐标",prop:"point",align:"center","min-width":"150px"}}),t._v(" "),i("el-table-column",{attrs:{label:"状态",prop:"works_status_name",align:"center","min-width":"120px"}}),t._v(" "),i("el-table-column",{attrs:{label:"操作",align:"center",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[0===n.works_status?i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.openEntryDialog(n)}}},[t._v("\n        补充材料1\n      ")]):t._e(),t._v(" "),0===n.works_status?i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.goToDetail(n.id)}}},[t._v("\n        查看详情\n      ")]):t._e(),t._v(" "),2===n.works_status?i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.openEntryDialog(n)}}},[t._v("\n        重新提交材料\n      ")]):t._e(),t._v(" "),3===n.works_status?i("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(e){return t.openRepairDialog(n)}}},[t._v("\n        确认修复\n      ")]):t._e(),t._v(" "),5===n.works_status?i("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(e){return t.openRepairDialog(n)}}},[t._v("\n        重新提交修复申请\n      ")]):t._e(),t._v(" "),6===n.works_status?i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.goToDetail(n.id)}}},[t._v("\n        查看详情\n      ")]):t._e()]}}])})],1),t._v(" "),i("el-dialog",{attrs:{title:"确认修复",visible:t.repairDialogVisible,width:"50%"},on:{"update:visible":function(e){t.repairDialogVisible=e}}},[i("el-form",{ref:"repairForm",attrs:{model:t.repairForm,rules:t.repairRules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"修复描述",prop:"desc"}},[i("el-input",{attrs:{type:"textarea",placeholder:"请输入修复描述"},model:{value:t.repairForm.desc,callback:function(e){t.$set(t.repairForm,"desc",e)},expression:"repairForm.desc"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"修复图片",prop:"imgs"}},[i("el-upload",{attrs:{action:"/admin/fileUpload","list-type":"picture-card","on-success":t.handleFileUpload,"on-remove":t.handleFileRemove,"file-list":t.repairForm.imgs}},[i("i",{staticClass:"el-icon-plus"})])],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.repairDialogVisible=!1}}},[t._v("取消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.submitRepair}},[t._v("确认")])],1)],1),t._v(" "),i("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"}],attrs:{total:t.total,page:t.listQuery.page,limit:t.listQuery.limit},on:{"update:page":function(e){return t.$set(t.listQuery,"page",e)},"update:limit":function(e){return t.$set(t.listQuery,"limit",e)},pagination:t.getList}}),t._v(" "),i("el-dialog",{attrs:{title:"项目录入",visible:t.entryDialogVisible,width:"80%"},on:{"update:visible":function(e){t.entryDialogVisible=e}}},[i("el-steps",{attrs:{active:t.currentStep,"finish-status":"success","align-center":""}},[i("el-step",{attrs:{title:"项目基础信息"}}),t._v(" "),i("el-step",{attrs:{title:"其他材料"}})],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:1===t.currentStep,expression:"currentStep === 1"}],staticStyle:{"margin-top":"20px"}},[i("el-form",{ref:"elForm1",attrs:{model:t.entryForm,rules:t.entryRules1,"label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:24}},[i("h4",[t._v("项目基本信息")]),t._v(" "),i("el-form-item",{attrs:{label:"项目名称",prop:"name"}},[i("el-input",{model:{value:t.entryForm.name,callback:function(e){t.$set(t.entryForm,"name",e)},expression:"entryForm.name"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"施工方式",prop:"constructionMethod"}},[i("el-input",{model:{value:t.entryForm.constructionMethod,callback:function(e){t.$set(t.entryForm,"constructionMethod",e)},expression:"entryForm.constructionMethod"}})],1)],1),t._v(" "),i("el-col",{staticStyle:{"padding-right":"10px"},attrs:{span:12}},[i("h4",[t._v("建设单位信息")]),t._v(" "),i("el-form-item",{attrs:{label:"单位名称",prop:"buildUnitName"}},[i("el-input",{model:{value:t.entryForm.buildUnitName,callback:function(e){t.$set(t.entryForm,"buildUnitName",e)},expression:"entryForm.buildUnitName"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"项目负责人",prop:"buildUnitLeader"}},[i("el-input",{model:{value:t.entryForm.buildUnitLeader,callback:function(e){t.$set(t.entryForm,"buildUnitLeader",e)},expression:"entryForm.buildUnitLeader"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"联系方式",prop:"buildUnitContact"}},[i("el-input",{model:{value:t.entryForm.buildUnitContact,callback:function(e){t.$set(t.entryForm,"buildUnitContact",e)},expression:"entryForm.buildUnitContact"}})],1)],1),t._v(" "),i("el-col",{staticStyle:{"padding-left":"10px"},attrs:{span:12}},[i("h4",[t._v("施工单位信息")]),t._v(" "),i("el-form-item",{attrs:{label:"单位名称",prop:"constructionUnitName"}},[i("el-input",{model:{value:t.entryForm.constructionUnitName,callback:function(e){t.$set(t.entryForm,"constructionUnitName",e)},expression:"entryForm.constructionUnitName"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"项目负责人",prop:"constructionUnitLeader"}},[i("el-input",{model:{value:t.entryForm.constructionUnitLeader,callback:function(e){t.$set(t.entryForm,"constructionUnitLeader",e)},expression:"entryForm.constructionUnitLeader"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"联系方式",prop:"constructionUnitContact"}},[i("el-input",{model:{value:t.entryForm.constructionUnitContact,callback:function(e){t.$set(t.entryForm,"constructionUnitContact",e)},expression:"entryForm.constructionUnitContact"}})],1)],1)],1)],1)],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:2===t.currentStep,expression:"currentStep === 2"}],staticStyle:{"margin-top":"20px"}},[i("h4",[t._v("其他材料")]),t._v(" "),i("el-form",{ref:"elForm3",attrs:{model:t.entryForm,rules:t.entryRules3,"label-width":"120px"}},[i("el-form-item",{attrs:{label:"交通设施方案",prop:"trafficPlan"}},[i("el-upload",{attrs:{action:"/admin/fileUpload","list-type":"text","on-success":function(e,i,n){return t.handleFileUpload("trafficPlan",e,i,n)},"on-remove":function(e,i){return t.handleFileRemove("trafficPlan",e,i)},"file-list":t.entryForm.trafficPlan.map((function(t){return{name:t.split("/").pop(),url:t}}))}},[i("el-button",{attrs:{type:"primary"}},[t._v("上传文件")])],1)],1),t._v(" "),i("el-form-item",{attrs:{label:"围挡方案",prop:"fencePlan"}},[i("el-upload",{attrs:{action:"/admin/fileUpload","list-type":"text","on-success":function(e,i,n){return t.handleFileUpload("fencePlan",e,i,n)},"on-remove":function(e,i){return t.handleFileRemove("fencePlan",e,i)},"file-list":t.entryForm.fencePlan.map((function(t){return{name:t.split("/").pop(),url:t}}))}},[i("el-button",{attrs:{type:"primary"}},[t._v("上传文件")])],1)],1),t._v(" "),i("el-form-item",{attrs:{label:"施工方案",prop:"constructionPlan"}},[i("el-upload",{attrs:{action:"/admin/fileUpload","list-type":"text","on-success":function(e,i,n){return t.handleFileUpload("constructionPlan",e,i,n)},"on-remove":function(e,i){return t.handleFileRemove("constructionPlan",e,i)},"file-list":t.entryForm.constructionPlan.map((function(t){return{name:t.split("/").pop(),url:t}}))}},[i("el-button",{attrs:{type:"primary"}},[t._v("上传文件")])],1)],1),t._v(" "),i("el-form-item",{attrs:{label:"施工图纸",prop:"constructionDrawing"}},[i("el-upload",{attrs:{action:"/admin/fileUpload","list-type":"text","on-success":function(e,i,n){return t.handleFileUpload("constructionDrawing",e,i,n)},"on-remove":function(e,i){return t.handleFileRemove("constructionDrawing",e,i)},"file-list":t.entryForm.constructionDrawing.map((function(t){return{name:t.split("/").pop(),url:t}}))}},[i("el-button",{attrs:{type:"primary"}},[t._v("上传文件")])],1)],1),t._v(" "),i("el-form-item",{attrs:{label:"安全施工承诺书",prop:"safetyCommitment"}},[i("el-upload",{attrs:{action:"/admin/fileUpload","list-type":"text","on-success":function(e,i,n){return t.handleFileUpload("safetyCommitment",e,i,n)},"on-remove":function(e,i){return t.handleFileRemove("safetyCommitment",e,i)},"file-list":t.entryForm.safetyCommitment.map((function(t){return{name:t.split("/").pop(),url:t}}))}},[i("el-button",{attrs:{type:"primary"}},[t._v("上传文件")])],1)],1),t._v(" "),i("el-form-item",{attrs:{label:"导改方案",prop:"changePlan"}},[i("el-upload",{attrs:{action:"/admin/fileUpload","list-type":"text","on-success":function(e,i,n){return t.handleFileUpload("changePlan",e,i,n)},"on-remove":function(e,i){return t.handleFileRemove("changePlan",e,i)},"file-list":t.entryForm.changePlan.map((function(t){return{name:t.split("/").pop(),url:t}}))}},[i("el-button",{attrs:{type:"primary"}},[t._v("上传文件")])],1)],1),t._v(" "),i("el-form-item",{attrs:{label:"施工申请单",prop:"applicationForm"}},[i("el-upload",{attrs:{action:"/admin/fileUpload","list-type":"text","on-success":function(e,i,n){return t.handleFileUpload("applicationForm",e,i,n)},"on-remove":function(e,i){return t.handleFileRemove("applicationForm",e,i)},"file-list":t.entryForm.applicationForm.map((function(t){return{name:t.split("/").pop(),url:t}}))}},[i("el-button",{attrs:{type:"primary"}},[t._v("上传文件")])],1)],1),t._v(" "),i("el-form-item",{attrs:{label:"安保方案",prop:"securityPlan"}},[i("el-upload",{attrs:{action:"/admin/fileUpload","list-type":"text","on-success":function(e,i,n){return t.handleFileUpload("securityPlan",e,i,n)},"on-remove":function(e,i){return t.handleFileRemove("securityPlan",e,i)},"file-list":t.entryForm.securityPlan.map((function(t){return{name:t.split("/").pop(),url:t}}))}},[i("el-button",{attrs:{type:"primary"}},[t._v("上传文件")])],1)],1)],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[1==t.currentStep?i("el-button",{attrs:{type:"primary"},on:{click:t.nextStep}},[t._v("下一步")]):t._e(),t._v(" "),2===t.currentStep?i("el-button",{attrs:{type:"success"},on:{click:t.submitEntry}},[t._v("提交")]):t._e()],1)],1),t._v(" "),i("el-dialog",{attrs:{title:"确认修复",visible:t.repairDialogVisible,width:"50%"},on:{"update:visible":function(e){t.repairDialogVisible=e}}},[i("el-form",{ref:"repairForm",attrs:{model:t.repairForm,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"修复时间",prop:"repairDate"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择修复日期"},model:{value:t.repairForm.repairDate,callback:function(e){t.$set(t.repairForm,"repairDate",e)},expression:"repairForm.repairDate"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"修复备注",prop:"desc"}},[i("el-input",{attrs:{type:"textarea",placeholder:"请输入修复备注"},model:{value:t.repairForm.desc,callback:function(e){t.$set(t.repairForm,"desc",e)},expression:"repairForm.desc"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"修复图片",prop:"imgs"}},[i("el-upload",{attrs:{action:"/admin/fileUpload","list-type":"picture-card","on-success":t.handleFileUpload2,"on-remove":t.handleFileRemove,"file-list":t.repairForm.imgs}},[i("i",{staticClass:"el-icon-plus"})])],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.repairDialogVisible=!1}}},[t._v("取消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.submitRepair}},[t._v("确认")])],1)],1)],1)},a=[],o=(i("f576"),i("28a5"),i("3835")),l=i("5530"),s=i("ade3"),c=i("012d"),u=i("333d"),p=i("025e"),m={components:{Pagination:u["a"]},data:function(){var t;return t={list:[],listLoading:!0,total:0,listQuery:{page:1,limit:20,name:""},tableKey:0,repairDialogVisible:!1,detail:{},entryDialogVisible:!1,entryRules1:{name:[{required:!0,message:"请输入项目名称",trigger:"blur"},{min:2,max:50,message:"项目名称长度需在2到50个字符之间",trigger:"blur"}],constructionMethod:[{required:!0,message:"请输入施工方式",trigger:"blur"},{min:2,max:20,message:"施工方式长度需在2到20个字符之间",trigger:"blur"}],buildUnitName:[{required:!0,message:"请输入建设单位名称",trigger:"blur"},{min:2,max:50,message:"建设单位名称长度需在2到50个字符之间",trigger:"blur"}],buildUnitLeader:[{required:!0,message:"请输入建设单位负责人",trigger:"blur"},{min:2,max:20,message:"负责人名称长度需在2到20个字符之间",trigger:"blur"}],buildUnitContact:[{required:!0,message:"请输入建设单位联系方式",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号",trigger:"blur"}],constructionUnitName:[{required:!0,message:"请输入施工单位名称",trigger:"blur"},{min:2,max:50,message:"施工单位名称长度需在2到50个字符之间",trigger:"blur"}],constructionUnitLeader:[{required:!0,message:"请输入施工单位负责人",trigger:"blur"},{min:2,max:20,message:"负责人名称长度需在2到20个字符之间",trigger:"blur"}],constructionUnitContact:[{required:!0,message:"请输入施工单位联系方式",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号",trigger:"blur"}]},entryRules2:{point:[{required:!0,message:"请选择项目坐标",trigger:"blur"}]},entryRules3:{trafficPlan:[],enclosurePlan:[],constructionPlan:[],constructionDrawing:[],safetyCommitment:[],reroutingPlan:[],applicationForm:[],securityPlan:[]},rejectDialogVisible:!1,rejectReason:"",currentRejectId:null,statusMap:{0:"待申请",1:"已申请",2:"待修复",3:"已修复",4:"被驳回"},typeMap:{1:"施工类型1",2:"施工类型2"},repairRules:{desc:[{required:!0,message:"请输入修复描述",trigger:"blur"}],imgs:[{required:!0,message:"请上传修复图片",trigger:"change"}]},map:null,marker:null,tempPoint:"",mapDialogVisible:!1,temp:{point:""},repairForm:{desc:"",imgs:[]},entryForm:{name:"",constructionMethod:"",buildUnitName:"",buildUnitLeader:"",buildUnitContact:"",constructionUnitName:"",constructionUnitLeader:"",constructionUnitContact:"",point:"",trafficPlan:[],fencePlan:[],constructionPlan:[],constructionDrawing:[],safetyCommitment:[],changePlan:[],applicationForm:[],securityPlan:[]},currentStep:1},Object(s["a"])(t,"map",null),Object(s["a"])(t,"marker",null),Object(s["a"])(t,"tempPoint",""),Object(s["a"])(t,"repairDialogVisible",!1),t},created:function(){this.getList()},methods:(n={getList:function(){var t=this;this.listLoading=!0,Object(c["M"])(this.listQuery).then((function(e){0===e.code&&(t.list=e.data.data,t.total=e.data.total),t.listLoading=!1}))},openMapDialog:function(){var t=this;this.mapDialogVisible=!0,this.$nextTick((function(){t.map||t.initMap()}))},nextStep:function(){var t=this,e="elForm".concat(this.currentStep);this.$refs[e].validate((function(e){e?1===t.currentStep&&(t.currentStep=2):t.$notify({title:"Error",message:"请完善当前步骤的信息",type:"error"})}))},goToDetail:function(t){this.$router.push({path:"/hazardManage/libraryDetail",query:{id:t}})},openEntryDialog:function(t){console.log("Row Data:",t),this.entryDialogVisible=!0,this.entryForm=Object(l["a"])(Object(l["a"])({},this.entryForm),t),console.log("Updated entryForm:",this.entryForm)},openRepairDialog:function(t){this.currentRepairId=t.id,this.repairForm={repairDate:"",desc:"",imgs:[]},this.repairDialogVisible=!0},prevStep:function(){this.currentStep>1&&this.currentStep--},handleUploadSuccess:function(t,e,i){this.entryForm.files=i.map((function(t){return t.response.url}))},initMap:function(){var t=this,e=new BMap.Point(120.15,30.28);this.map=new BMap.Map("baiduMap"),this.map.centerAndZoom(e,12),this.map.enableScrollWheelZoom(!0),this.map.addEventListener("click",(function(e){var i=e.point;t.marker&&t.map.removeOverlay(t.marker),t.marker=new BMap.Marker(i),t.map.addOverlay(t.marker),t.tempPoint="".concat(i.lng,", ").concat(i.lat)}))},confirmMapPoint:function(){if(this.tempPoint){var t=this.tempPoint.split(",").map((function(t){return parseFloat(t).toFixed(2)})),e=Object(o["a"])(t,2),i=e[0],n=e[1];this.entryForm.point="".concat(i,", ").concat(n),this.mapDialogVisible=!1}else this.$notify({title:"Error",message:"请点击地图选择坐标",type:"warning"})},handleFileUpload:function(t,e,i,n){console.log(111111111),console.log(e),0===e.code&&e.data.url?this.entryForm[t].push(e.data.url):this.$notify({title:"Error",message:"文件上传失败，请重试",type:"error"})},handleFileUpload2:function(t,e,i,n){console.log(111111111),console.log(e),0===e.response.code&&e.response.data.url?this.repairForm["imgs"].push(e.response.data.url):this.$notify({title:"Error",message:"文件上传失败，请重试",type:"error"})},handleFileRemove:function(t,e,i){this.entryForm[t]=i.map((function(t){return t.url||t.response&&t.response.data.url}))},handleSelectionChange:function(t){this.selectedItems=t,console.log("选中的行:",this.selectedItems)},formatTime:function(t){if(!t)return"-";var e=new Date(1e3*t),i=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0"),a=String(e.getHours()).padStart(2,"0"),o=String(e.getMinutes()).padStart(2,"0"),l=String(e.getSeconds()).padStart(2,"0");return"".concat(i,"-").concat(n,"-").concat(r," ").concat(a,":").concat(o,":").concat(l)},handleFilter:function(){this.listQuery.page=1,this.getList()},submitRepair:function(){var t=this;this.$refs.repairForm.validate((function(e){if(e){var i={mid:t.currentRepairId,desc:t.repairForm.desc,imgs:JSON.stringify(t.repairForm.imgs)};Object(c["zb"])(i).then((function(e){0===e.code?(t.$notify({title:"Success",message:"修复确认成功",type:"success"}),t.repairDialogVisible=!1,t.getList()):t.$notify({title:"Error",message:e.msg,type:"error"})}))}}))},viewDetails:function(t){var e=this;Object(c["getRoadOccupationDetail"])(t.id).then((function(t){0===t.code&&(e.detail=t.data,e.detail.imgs=e.detail.imgs?JSON.parse(e.detail.imgs):[],e.detailDialogVisible=!0)}))},submitEntry:function(){var t=this;console.log("entryForm",this.entryForm);var e=Object(l["a"])(Object(l["a"])({},Object(p["b"])(this.entryForm)),{},{mid:this.entryForm.work_id,trafficPlan:JSON.stringify(this.entryForm.trafficPlan||[]),fencePlan:JSON.stringify(this.entryForm.fencePlan||[]),constructionPlan:JSON.stringify(this.entryForm.constructionPlan||[]),constructionDrawing:JSON.stringify(this.entryForm.constructionDrawing||[]),safetyCommitment:JSON.stringify(this.entryForm.safetyCommitment||[]),changePlan:JSON.stringify(this.entryForm.changePlan||[]),applicationForm:JSON.stringify(this.entryForm.applicationForm||[]),securityPlan:JSON.stringify(this.entryForm.securityPlan||[])});console.log(e),Object(c["pb"])(e).then((function(e){0===e.code?(t.$notify({title:"Success",message:"录入成功",type:"success"}),t.entryDialogVisible=!1,t.getList()):t.$notify({title:"Error",message:e.msg,type:"error"})}))},approveOccupation:function(t){var e=this;this.$confirm("确定通过该施工申请?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"success"}).then((function(){Object(c["l"])(t).then((function(t){0===t.code?(e.$notify({title:"Success",message:"审核通过",type:"success"}),e.getList()):e.$notify({title:"Error",message:t.msg,type:"warning"})}))}))}},Object(s["a"])(n,"openRepairDialog",(function(t){this.currentRepairId=t.work_id,this.repairForm={repairDate:"",desc:"",imgs:[]},this.repairDialogVisible=!0})),Object(s["a"])(n,"openRejectDialog",(function(t){this.rejectDialogVisible=!0,this.currentRejectId=t})),Object(s["a"])(n,"rejectOccupation",(function(){var t=this;this.rejectReason?Object(c["V"])({id:this.currentRejectId,reason:this.rejectReason}).then((function(e){0===e.code?(t.$notify({title:"Success",message:"驳回成功",type:"success"}),t.rejectDialogVisible=!1,t.getList()):t.$notify({title:"Error",message:e.msg,type:"warning"})})):this.$notify({title:"Error",message:"请输入驳回理由",type:"warning"})})),Object(s["a"])(n,"handleUploadSuccess",(function(t,e,i){this.entryForm.imgs=i.map((function(t){return t.response.url}))})),n)},d=m,f=(i("ac86"),i("fc3b"),i("2877")),g=Object(f["a"])(d,r,a,!1,null,"14aee028",null);e["default"]=g.exports},ac3f:function(t,e,i){},ac86:function(t,e,i){"use strict";i("ac3f")},b300:function(t,e,i){},e498:function(t,e,i){"use strict";i("7456")},fc3b:function(t,e,i){"use strict";i("b300")}}]);